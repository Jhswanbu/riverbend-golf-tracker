<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riverbend B Group Golf Tracker</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
        }
        /* 
        TO ADD YOUR RIVERBEND COURSE PHOTO:
        1. Upload your photo to imgur.com or any image host
        2. Copy the direct image URL
        3. Replace YOUR_IMAGE_URL below with your URL
        4. Remove the two slashes (//) before background-image
        */
        .banner-header {
            position: relative;
            height: 250px;
            /* background-image: url('YOUR_IMAGE_URL_HERE'); */
            background-size: cover;
            background-position: center;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            border-radius: 0.5rem;
            overflow: hidden;
        }
        .banner-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(0, 100, 0, 0.85) 0%, rgba(34, 139, 34, 0.75) 50%, rgba(0, 100, 0, 0.85) 100%);
            z-index: 1;
        }
        .banner-header > * {
            position: relative;
            z-index: 2;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simple icon components
        const Users = () => <span>üë•</span>;
        const Plus = () => <span>‚ûï</span>;
        const Trash2 = () => <span>üóëÔ∏è</span>;
        const Play = () => <span>‚ñ∂Ô∏è</span>;
        const Save = () => <span>üíæ</span>;
        const Trophy = () => <span>üèÜ</span>;

        const GolfMoneyGameTracker = () => {
            // Riverbend Country Club course data
            const courseData = {
                name: "Riverbend Country Club",
                holes: [
                    { hole: 1, par: 5, handicap: 5, gold: 559, blue: 541, white: 523 },
                    { hole: 2, par: 4, handicap: 13, gold: 386, blue: 355, white: 300 },
                    { hole: 3, par: 4, handicap: 7, gold: 371, blue: 359, white: 343 },
                    { hole: 4, par: 3, handicap: 17, gold: 191, blue: 147, white: 126 },
                    { hole: 5, par: 4, handicap: 9, gold: 387, blue: 368, white: 350 },
                    { hole: 6, par: 4, handicap: 3, gold: 420, blue: 381, white: 347 },
                    { hole: 7, par: 3, handicap: 15, gold: 203, blue: 178, white: 149 },
                    { hole: 8, par: 5, handicap: 1, gold: 483, blue: 469, white: 431 },
                    { hole: 9, par: 4, handicap: 11, gold: 398, blue: 374, white: 344 },
                    { hole: 10, par: 4, handicap: 8, gold: 415, blue: 395, white: 371 },
                    { hole: 11, par: 4, handicap: 12, gold: 407, blue: 391, white: 351 },
                    { hole: 12, par: 5, handicap: 4, gold: 502, blue: 481, white: 452 },
                    { hole: 13, par: 4, handicap: 6, gold: 403, blue: 384, white: 340 },
                    { hole: 14, par: 3, handicap: 16, gold: 187, blue: 176, white: 166 },
                    { hole: 15, par: 4, handicap: 18, gold: 484, blue: 447, white: 427 },
                    { hole: 16, par: 4, handicap: 2, gold: 387, blue: 348, white: 328 },
                    { hole: 17, par: 3, handicap: 10, gold: 158, blue: 137, white: 110 },
                    { hole: 18, par: 5, handicap: 14, gold: 567, blue: 553, white: 479 }
                ],
                totalPar: 72,
                frontNine: 36,
                backNine: 36
            };

            const [view, setView] = useState('setup');
            const [scoreEntryMode, setScoreEntryMode] = useState('hole-by-hole'); // 'hole-by-hole' or 'grid'
            const [showSettings, setShowSettings] = useState(false);
            const [sheetsConfig, setSheetsConfig] = useState({
                apiKey: localStorage.getItem('sheets_api_key') || '',
                spreadsheetId: localStorage.getItem('sheets_spreadsheet_id') || '',
                webAppUrl: localStorage.getItem('sheets_webapp_url') || '',
                useAppsScript: localStorage.getItem('sheets_use_appsscript') === 'true',
                enabled: localStorage.getItem('sheets_enabled') === 'true'
            });
            const [players, setPlayers] = useState([
                { id: 1, name: 'Brian Y', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 2, name: 'Dana', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 3, name: 'Donald', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 4, name: 'Emde', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 5, name: 'Fletcher', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 6, name: 'Goheen', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 7, name: 'Jon S', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 8, name: 'Mick', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 9, name: 'Mike K', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 10, name: 'Mitch', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 11, name: 'Nobles', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 12, name: 'Paul', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 13, name: 'Ray', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 14, name: 'Rick M', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 15, name: 'Tate', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } },
                { id: 16, name: 'Vic', tees: 'White', stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 } }
            ]);
            const [selectedPlayers, setSelectedPlayers] = useState([]);
            const [teams, setTeams] = useState({ team1: [], team2: [] });
            const [gameSettings, setGameSettings] = useState({
                numBets: 1,
                betAmount: 5,
                betConfiguration: [],
                birdieBonus: false,
                parOrBetterBonus: false,
                allBalls: false,
                allBallsFront: null,
                allBallsBack: null
            });
            const [scores, setScores] = useState({});
            const [currentHole, setCurrentHole] = useState(1);
            const [activeBets, setActiveBets] = useState([]);
            const [completedGames, setCompletedGames] = useState([]);
            const [newPlayer, setNewPlayer] = useState({ name: '', tees: 'White' });
            const [editingPlayer, setEditingPlayer] = useState(null);

            const teeBoxOptions = ['Red', 'Red/White', 'White', 'White/Blue', 'Blue', 'Gold'];

            // Player management functions
            const addPlayer = async () => {
                if (newPlayer.name) {
                    const player = {
                        id: Date.now(),
                        name: newPlayer.name,
                        tees: 'White',
                        stats: { rounds: 0, avgScore: 0, highScore: null, lowScore: null, moneyWon: 0 }
                    };
                    
                    const updatedPlayers = [...players, player].sort((a, b) => a.name.localeCompare(b.name));
                    setPlayers(updatedPlayers);
                    setNewPlayer({ name: '', tees: 'White' });
                    
                    // Save to Google Sheets if configured
                    if (sheetsConfig.enabled && sheetsConfig.useAppsScript && sheetsConfig.webAppUrl) {
                        await savePlayersToSheet(updatedPlayers);
                    }
                }
            };

            const deletePlayer = async (id) => {
                const updatedPlayers = players.filter(p => p.id !== id).sort((a, b) => a.name.localeCompare(b.name));
                setPlayers(updatedPlayers);
                
                // Save to Google Sheets if configured
                if (sheetsConfig.enabled && sheetsConfig.useAppsScript && sheetsConfig.webAppUrl) {
                    await savePlayersToSheet(updatedPlayers);
                }
            };

            const updatePlayer = async (id, updates) => {
                const updatedPlayers = players.map(p => p.id === id ? { ...p, ...updates } : p).sort((a, b) => a.name.localeCompare(b.name));
                setPlayers(updatedPlayers);
                setEditingPlayer(null);
                
                // Save to Google Sheets if configured
                if (sheetsConfig.enabled && sheetsConfig.useAppsScript && sheetsConfig.webAppUrl) {
                    await savePlayersToSheet(updatedPlayers);
                }
            };

            const togglePlayerSelection = (playerId) => {
                setSelectedPlayers(prev => 
                    prev.includes(playerId) 
                        ? prev.filter(id => id !== playerId)
                        : [...prev, playerId]
                );
            };

            const swapPlayer = (playerId, fromTeam) => {
                const toTeam = fromTeam === 'team1' ? 'team2' : 'team1';
                setTeams(prev => ({
                    ...prev,
                    [fromTeam]: prev[fromTeam].filter(p => p.id !== playerId),
                    [toTeam]: [...prev[toTeam], prev[fromTeam].find(p => p.id === playerId)]
                }));
            };

            const generateBetConfiguration = (numBets, playersPerTeam) => {
                const config = [];
                const ballsPerBet = Math.floor(playersPerTeam / numBets);
                
                for (let i = 0; i < numBets; i++) {
                    const startIdx = i * ballsPerBet;
                    const endIdx = startIdx + ballsPerBet;
                    const players = [];
                    for (let j = startIdx; j < endIdx; j++) {
                        players.push(j);
                    }
                    config.push({
                        betNumber: i + 1,
                        players,
                        description: `Best ${players.map((_, idx) => idx + 1 + startIdx).join(' & ')} ball${players.length > 1 ? 's' : ''}`
                    });
                }
                return config;
            };

            const createTeams = () => {
                const selected = players.filter(p => selectedPlayers.includes(p.id));
                const sorted = [...selected].sort(() => Math.random() - 0.5);
                
                let team1 = [];
                let team2 = [];

                sorted.forEach((player, index) => {
                    if (index % 2 === 0) {
                        team1.push(player);
                    } else {
                        team2.push(player);
                    }
                });

                const hasOddPlayers = selected.length % 2 !== 0;
                const teamWithExtra = team1.length > team2.length ? 'team1' : (team2.length > team1.length ? 'team2' : null);

                setTeams({ team1, team2, hasOddPlayers, teamWithExtra });
                
                const playersPerTeam = Math.min(team1.length, team2.length);
                const betConfig = generateBetConfiguration(gameSettings.numBets, playersPerTeam);
                setGameSettings(prev => ({ ...prev, betConfiguration: betConfig }));
                
                const initialScores = {};
                [...team1, ...team2].forEach(player => {
                    initialScores[player.id] = Array(18).fill(null);
                });
                setScores(initialScores);

                const initialBets = [
                    { id: 0, name: 'Front 9', amount: gameSettings.betAmount, startHole: 1, endHole: 9, active: true, presses: [] },
                    { id: 1, name: 'Back 9', amount: gameSettings.betAmount, startHole: 10, endHole: 18, active: true, presses: [] },
                    { id: 2, name: 'Total', amount: gameSettings.betAmount, startHole: 1, endHole: 18, active: true, presses: [] }
                ];
                setActiveBets(initialBets);
            };

            const updateScore = (playerId, hole, score) => {
                setScores(prev => ({
                    ...prev,
                    [playerId]: prev[playerId].map((s, i) => i === hole - 1 ? (score === '' ? null : parseInt(score)) : s)
                }));
            };

            const getHoleWinner = (hole) => {
                const holeIndex = hole - 1;
                let team1Scores = teams.team1
                    .map(p => scores[p.id][holeIndex])
                    .filter(s => s !== null)
                    .sort((a, b) => a - b);
                
                let team2Scores = teams.team2
                    .map(p => scores[p.id][holeIndex])
                    .filter(s => s !== null)
                    .sort((a, b) => a - b);

                if (teams.hasOddPlayers) {
                    if (teams.teamWithExtra === 'team1' && team1Scores.length > team2Scores.length) {
                        team1Scores = team1Scores.slice(0, -1);
                    } else if (teams.teamWithExtra === 'team2' && team2Scores.length > team1Scores.length) {
                        team2Scores = team2Scores.slice(0, -1);
                    }
                }

                if (team1Scores.length === 0 || team2Scores.length === 0) return null;

                const results = [];
                
                gameSettings.betConfiguration.forEach((betConfig, betIndex) => {
                    const team1BetScores = betConfig.players
                        .filter(pos => pos < team1Scores.length)
                        .map(pos => team1Scores[pos]);
                    
                    const team2BetScores = betConfig.players
                        .filter(pos => pos < team2Scores.length)
                        .map(pos => team2Scores[pos]);

                    if (team1BetScores.length === 0 || team2BetScores.length === 0) {
                        results.push({ betIndex, winner: 'tie' });
                        return;
                    }

                    const team1Total = team1BetScores.reduce((sum, s) => sum + s, 0);
                    const team2Total = team2BetScores.reduce((sum, s) => sum + s, 0);

                    if (team1Total < team2Total) {
                        results.push({ betIndex, winner: 'team1' });
                    } else if (team2Total < team1Total) {
                        results.push({ betIndex, winner: 'team2' });
                    } else {
                        results.push({ betIndex, winner: 'tie' });
                    }
                });

                return results;
            };

            const calculateMoneyStatus = (throughHole = 18) => {
                const betResults = { team1: 0, team2: 0 };
                
                for (let hole = 1; hole <= throughHole; hole++) {
                    const holeResults = getHoleWinner(hole);
                    if (holeResults) {
                        holeResults.forEach(result => {
                            if (result.winner === 'team1') betResults.team1++;
                            if (result.winner === 'team2') betResults.team2++;
                        });
                    }
                }

                if (gameSettings.birdieBonus) {
                    for (let hole = 1; hole <= throughHole; hole++) {
                        const par = courseData.holes[hole - 1].par;
                        
                        teams.team1.forEach(player => {
                            const score = scores[player.id][hole - 1];
                            if (score !== null) {
                                const underPar = par - score;
                                if (underPar === 1) betResults.team1++;        // Birdie = 1 bet
                                else if (underPar === 2) betResults.team1 += 2; // Eagle = 2 bets
                                else if (underPar >= 3) betResults.team1 += 3;  // Double Eagle+ = 3 bets
                            }
                        });
                        
                        teams.team2.forEach(player => {
                            const score = scores[player.id][hole - 1];
                            if (score !== null) {
                                const underPar = par - score;
                                if (underPar === 1) betResults.team2++;        // Birdie = 1 bet
                                else if (underPar === 2) betResults.team2 += 2; // Eagle = 2 bets
                                else if (underPar >= 3) betResults.team2 += 3;  // Double Eagle+ = 3 bets
                            }
                        });
                    }
                }

                if (gameSettings.parOrBetterBonus) {
                    for (let hole = 1; hole <= throughHole; hole++) {
                        const par = courseData.holes[hole - 1].par;
                        
                        const team1HoleScores = teams.team1
                            .map(p => scores[p.id][hole - 1])
                            .filter(s => s !== null);
                        
                        if (team1HoleScores.length === teams.team1.length) {
                            const team1Total = team1HoleScores.reduce((sum, s) => sum + s, 0);
                            const team1Par = par * teams.team1.length;
                            if (team1Total <= team1Par) {
                                betResults.team1 += teams.team1.length;
                            }
                        }
                        
                        const team2HoleScores = teams.team2
                            .map(p => scores[p.id][hole - 1])
                            .filter(s => s !== null);
                        
                        if (team2HoleScores.length === teams.team2.length) {
                            const team2Total = team2HoleScores.reduce((sum, s) => sum + s, 0);
                            const team2Par = par * teams.team2.length;
                            if (team2Total <= team2Par) {
                                betResults.team2 += teams.team2.length;
                            }
                        }
                    }
                }

                // Add all-balls bet if enabled
                if (gameSettings.allBalls) {
                    // Front nine all-balls hole
                    if (gameSettings.allBallsFront && throughHole >= gameSettings.allBallsFront) {
                        const hole = gameSettings.allBallsFront;
                        const team1AllScores = teams.team1
                            .map(p => scores[p.id][hole - 1])
                            .filter(s => s !== null);
                        const team2AllScores = teams.team2
                            .map(p => scores[p.id][hole - 1])
                            .filter(s => s !== null);
                        
                        if (team1AllScores.length === teams.team1.length && team2AllScores.length === teams.team2.length) {
                            const team1Total = team1AllScores.reduce((sum, s) => sum + s, 0);
                            const team2Total = team2AllScores.reduce((sum, s) => sum + s, 0);
                            
                            if (team1Total < team2Total) betResults.team1++;
                            else if (team2Total < team1Total) betResults.team2++;
                        }
                    }
                    
                    // Back nine all-balls hole
                    if (gameSettings.allBallsBack && throughHole >= gameSettings.allBallsBack) {
                        const hole = gameSettings.allBallsBack;
                        const team1AllScores = teams.team1
                            .map(p => scores[p.id][hole - 1])
                            .filter(s => s !== null);
                        const team2AllScores = teams.team2
                            .map(p => scores[p.id][hole - 1])
                            .filter(s => s !== null);
                        
                        if (team1AllScores.length === teams.team1.length && team2AllScores.length === teams.team2.length) {
                            const team1Total = team1AllScores.reduce((sum, s) => sum + s, 0);
                            const team2Total = team2AllScores.reduce((sum, s) => sum + s, 0);
                            
                            if (team1Total < team2Total) betResults.team1++;
                            else if (team2Total < team1Total) betResults.team2++;
                        }
                    }
                }

                const team1Wins = betResults.team1;
                const team2Wins = betResults.team2;
                const netBetsWon = team1Wins - team2Wins;
                
                const moneyPerPlayer = {};
                
                if (netBetsWon > 0) {
                    const totalPot = netBetsWon * gameSettings.betAmount * teams.team2.length;
                    const winPerPlayer = totalPot / teams.team1.length;
                    const losePerPlayer = -netBetsWon * gameSettings.betAmount;
                    
                    teams.team1.forEach(p => {
                        moneyPerPlayer[p.id] = winPerPlayer;
                    });
                    teams.team2.forEach(p => {
                        moneyPerPlayer[p.id] = losePerPlayer;
                    });
                } else if (netBetsWon < 0) {
                    const totalPot = Math.abs(netBetsWon) * gameSettings.betAmount * teams.team1.length;
                    const winPerPlayer = totalPot / teams.team2.length;
                    const losePerPlayer = -Math.abs(netBetsWon) * gameSettings.betAmount;
                    
                    teams.team1.forEach(p => {
                        moneyPerPlayer[p.id] = losePerPlayer;
                    });
                    teams.team2.forEach(p => {
                        moneyPerPlayer[p.id] = winPerPlayer;
                    });
                } else {
                    [...teams.team1, ...teams.team2].forEach(p => {
                        moneyPerPlayer[p.id] = 0;
                    });
                }

                return moneyPerPlayer;
            };

            const getScoreColor = (score, hole) => {
                if (!score) return '';
                const par = courseData.holes[hole - 1].par;
                if (score < par) return 'text-red-600 font-bold';
                if (score === par) return 'text-black';
                return 'text-gray-700';
            };

            const getScoreToPar = (score, hole) => {
                if (!score) return '';
                const par = courseData.holes[hole - 1].par;
                const diff = score - par;
                if (diff === 0) return 'E';
                if (diff > 0) return `+${diff}`;
                return diff.toString();
            };

            const getBirdieBonus = (score, hole) => {
                if (!score || !gameSettings.birdieBonus) return null;
                const par = courseData.holes[hole - 1].par;
                const underPar = par - score;
                
                if (underPar === 1) return { text: 'üê¶ Birdie', bets: 1 };
                if (underPar === 2) return { text: 'ü¶Ö Eagle', bets: 2 };
                if (underPar >= 3) return { text: 'ü¶Öü¶Ö Double Eagle', bets: 3 };
                return null;
            };

            const getTotalBetsStatus = () => {
                let team1Total = 0;
                let team2Total = 0;
                
                for (let hole = 1; hole <= currentHole; hole++) {
                    const holeResults = getHoleWinner(hole);
                    if (holeResults) {
                        holeResults.forEach(result => {
                            if (result.winner === 'team1') team1Total++;
                            if (result.winner === 'team2') team2Total++;
                        });
                    }
                }

                if (gameSettings.birdieBonus) {
                    for (let hole = 1; hole <= currentHole; hole++) {
                        const par = courseData.holes[hole - 1].par;
                        
                        teams.team1.forEach(player => {
                            const score = scores[player.id][hole - 1];
                            if (score !== null) {
                                const underPar = par - score;
                                if (underPar === 1) team1Total++;
                                else if (underPar === 2) team1Total += 2;
                                else if (underPar === 3) team1Total += 3;
                            }
                        });
                        
                        teams.team2.forEach(player => {
                            const score = scores[player.id][hole - 1];
                            if (score !== null) {
                                const underPar = par - score;
                                if (underPar === 1) team2Total++;
                                else if (underPar === 2) team2Total += 2;
                                else if (underPar === 3) team2Total += 3;
                            }
                        });
                    }
                }

                if (gameSettings.parOrBetterBonus) {
                    for (let hole = 1; hole <= currentHole; hole++) {
                        const par = courseData.holes[hole - 1].par;
                        
                        const team1HoleScores = teams.team1
                            .map(p => scores[p.id][hole - 1])
                            .filter(s => s !== null);
                        
                        if (team1HoleScores.length === teams.team1.length) {
                            const team1Total_score = team1HoleScores.reduce((sum, s) => sum + s, 0);
                            const team1Par = par * teams.team1.length;
                            if (team1Total_score <= team1Par) {
                                team1Total += teams.team1.length;
                            }
                        }
                        
                        const team2HoleScores = teams.team2
                            .map(p => scores[p.id][hole - 1])
                            .filter(s => s !== null);
                        
                        if (team2HoleScores.length === teams.team2.length) {
                            const team2Total_score = team2HoleScores.reduce((sum, s) => sum + s, 0);
                            const team2Par = par * teams.team2.length;
                            if (team2Total_score <= team2Par) {
                                team2Total += teams.team2.length;
                            }
                        }
                    }
                }
                
                return {
                    team1Total,
                    team2Total,
                    netBets: team1Total - team2Total
                };
            };

            const finalizeGame = () => {
                const moneyResults = calculateMoneyStatus(18);
                const gameRecord = {
                    date: new Date().toISOString(),
                    teams,
                    scores,
                    moneyResults,
                    settings: gameSettings
                };

                setCompletedGames([...completedGames, gameRecord]);

                const updatedPlayers = players.map(player => {
                    const playerScore = scores[player.id];
                    if (playerScore) {
                        const totalScore = playerScore.reduce((sum, s) => sum + (s || 0), 0);
                        const moneyWon = moneyResults[player.id] || 0;
                        const newRounds = player.stats.rounds + 1;
                        const newTotalScore = (player.stats.avgScore * player.stats.rounds) + totalScore;
                        const newAvgScore = newTotalScore / newRounds;
                        
                        return {
                            ...player,
                            stats: {
                                rounds: newRounds,
                                avgScore: newAvgScore,
                                highScore: player.stats.highScore === null ? totalScore : Math.max(player.stats.highScore, totalScore),
                                lowScore: player.stats.lowScore === null ? totalScore : Math.min(player.stats.lowScore, totalScore),
                                moneyWon: player.stats.moneyWon + moneyWon
                            }
                        };
                    }
                    return player;
                });

                setPlayers(updatedPlayers);
                
                // Save to Google Sheets if enabled
                if (sheetsConfig.enabled && sheetsConfig.apiKey && sheetsConfig.spreadsheetId) {
                    saveToGoogleSheets(gameRecord, updatedPlayers);
                }
                
                alert('Game finalized! Player stats updated.');
                setView('stats');
            };

            const saveToGoogleSheets = async (gameRecord, updatedPlayers) => {
                console.log('Starting Google Sheets save...');
                
                // Use Apps Script if configured
                if (sheetsConfig.useAppsScript && sheetsConfig.webAppUrl) {
                    return await saveViaAppsScript(gameRecord, updatedPlayers);
                }
                
                // Otherwise try API method (read-only for most users)
                console.log('API Key present:', !!sheetsConfig.apiKey);
                console.log('Spreadsheet ID present:', !!sheetsConfig.spreadsheetId);
                
                try {
                    // Save game data
                    const gameRow = [
                        gameRecord.date,
                        JSON.stringify(gameRecord.teams),
                        JSON.stringify(gameRecord.scores),
                        JSON.stringify(gameRecord.settings),
                        JSON.stringify(gameRecord.moneyResults)
                    ];

                    console.log('Saving game data to Games sheet...');
                    const gameUrl = `https://sheets.googleapis.com/v4/spreadsheets/${sheetsConfig.spreadsheetId}/values/Games!A:E:append?valueInputOption=RAW&key=${sheetsConfig.apiKey}`;
                    
                    const gameResponse = await fetch(gameUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ values: [gameRow] })
                    });

                    const gameData = await gameResponse.json();
                    
                    if (!gameResponse.ok) {
                        console.error('Game save failed:', gameData);
                        if (gameData.error?.code === 403) {
                            throw new Error('API Keys are read-only. Please use Apps Script method (see Settings).');
                        }
                        throw new Error(`Game save failed: ${gameData.error?.message || 'Unknown error'}`);
                    }
                    
                    console.log('Game data saved successfully');

                    // Update player stats
                    const playerRows = [
                        ['Name', 'Tees', 'Rounds', 'Avg Score', 'Low', 'High', 'Money Won'],
                        ...updatedPlayers.map(p => [
                            p.name,
                            p.tees,
                            p.stats.rounds,
                            p.stats.avgScore.toFixed(1),
                            p.stats.lowScore || '',
                            p.stats.highScore || '',
                            p.stats.moneyWon.toFixed(2)
                        ])
                    ];

                    console.log('Updating player stats in Players sheet...');
                    const playerUrl = `https://sheets.googleapis.com/v4/spreadsheets/${sheetsConfig.spreadsheetId}/values/Players!A:G?valueInputOption=RAW&key=${sheetsConfig.apiKey}`;
                    
                    const playerResponse = await fetch(playerUrl, {
                        method: 'PUT',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ values: playerRows })
                    });

                    const playerData = await playerResponse.json();
                    
                    if (!playerResponse.ok) {
                        console.error('Player stats save failed:', playerData);
                        throw new Error(`Player stats save failed: ${playerData.error?.message || 'Unknown error'}`);
                    }

                    console.log('Player stats saved successfully');
                    alert('‚úÖ Game data successfully saved to Google Sheets!');
                    
                } catch (error) {
                    console.error('Error saving to Google Sheets:', error);
                    alert(`‚ö†Ô∏è Warning: Could not save to Google Sheets.\n\nError: ${error.message}\n\nData saved locally only.\n\nRecommendation: Use Apps Script method in Settings ‚öôÔ∏è for reliable write access.`);
                }
            };

            const saveViaAppsScript = async (gameRecord, updatedPlayers) => {
                console.log('Saving via Apps Script Web App...');
                
                try {
                    // Save game
                    const gamePayload = {
                        action: 'saveGame',
                        date: gameRecord.date,
                        teams: JSON.stringify(gameRecord.teams),
                        scores: JSON.stringify(gameRecord.scores),
                        settings: JSON.stringify(gameRecord.settings),
                        moneyResults: JSON.stringify(gameRecord.moneyResults)
                    };

                    console.log('Posting game data...');
                    const gameResponse = await fetch(sheetsConfig.webAppUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(gamePayload),
                        mode: 'no-cors' // Apps Script requires this
                    });

                    // Update players
                    const playerPayload = {
                        action: 'updatePlayers',
                        players: updatedPlayers.map(p => ({
                            name: p.name,
                            tees: p.tees,
                            rounds: p.stats.rounds,
                            avgScore: parseFloat(p.stats.avgScore.toFixed(1)),
                            lowScore: p.stats.lowScore || '',
                            highScore: p.stats.highScore || '',
                            moneyWon: parseFloat(p.stats.moneyWon.toFixed(2))
                        }))
                    };

                    console.log('Posting player data...');
                    const playerResponse = await fetch(sheetsConfig.webAppUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(playerPayload),
                        mode: 'no-cors' // Apps Script requires this
                    });

                    console.log('Data sent to Apps Script successfully');
                    alert('‚úÖ Game data sent to Google Sheets!\n\nCheck your spreadsheet to confirm.');
                    
                } catch (error) {
                    console.error('Error saving via Apps Script:', error);
                    alert(`‚ö†Ô∏è Could not save via Apps Script.\n\nError: ${error.message}\n\nCheck:\n- Web App URL is correct\n- Apps Script is deployed\n- You authorized the script`);
                }
            };

            const saveSheetsConfig = () => {
                localStorage.setItem('sheets_api_key', sheetsConfig.apiKey);
                localStorage.setItem('sheets_spreadsheet_id', sheetsConfig.spreadsheetId);
                localStorage.setItem('sheets_webapp_url', sheetsConfig.webAppUrl);
                localStorage.setItem('sheets_use_appsscript', sheetsConfig.useAppsScript);
                localStorage.setItem('sheets_enabled', sheetsConfig.enabled);
                setShowSettings(false);
                
                // Load players from sheet if enabled
                if (sheetsConfig.enabled && ((sheetsConfig.useAppsScript && sheetsConfig.webAppUrl) || (sheetsConfig.apiKey && sheetsConfig.spreadsheetId))) {
                    if (!sheetsConfig.useAppsScript) {
                        loadPlayersFromSheet();
                    }
                }
                
                alert('Google Sheets configuration saved!');
            };

            const savePlayersToSheet = async (playersToSave) => {
                try {
                    const playerPayload = {
                        action: 'updatePlayers',
                        players: playersToSave.map(p => ({
                            name: p.name,
                            tees: p.tees || 'White',
                            rounds: p.stats.rounds,
                            avgScore: parseFloat(p.stats.avgScore.toFixed(1)),
                            lowScore: p.stats.lowScore || '',
                            highScore: p.stats.highScore || '',
                            moneyWon: parseFloat(p.stats.moneyWon.toFixed(2))
                        }))
                    };

                    await fetch(sheetsConfig.webAppUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(playerPayload),
                        mode: 'no-cors'
                    });

                    console.log('Players saved to Google Sheets');
                } catch (error) {
                    console.error('Error saving players:', error);
                }
            };

            const loadPlayersFromSheet = async () => {
                try {
                    const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetsConfig.spreadsheetId}/values/Players!A2:G100?key=${sheetsConfig.apiKey}`;
                    const response = await fetch(url);
                    const data = await response.json();

                    if (response.ok && data.values && data.values.length > 0) {
                        const loadedPlayers = data.values.map((row, index) => ({
                            id: index + 1,
                            name: row[0] || '',
                            tees: row[1] || 'White',
                            stats: {
                                rounds: parseInt(row[2]) || 0,
                                avgScore: parseFloat(row[3]) || 0,
                                lowScore: row[4] ? parseInt(row[4]) : null,
                                highScore: row[5] ? parseInt(row[5]) : null,
                                moneyWon: parseFloat(row[6]) || 0
                            }
                        })).filter(p => p.name).sort((a, b) => a.name.localeCompare(b.name)); // Sort alphabetically

                        setPlayers(loadedPlayers);
                        console.log(`Loaded ${loadedPlayers.length} players from Google Sheets`);
                        alert(`‚úÖ Loaded ${loadedPlayers.length} players from your spreadsheet!`);
                    } else {
                        console.log('No players found in spreadsheet, using default list');
                    }
                } catch (error) {
                    console.error('Error loading players from sheet:', error);
                    alert('Could not load players from spreadsheet. Using default list.');
                }
            };

            // Load players on initial mount if sheets is configured
            useEffect(() => {
                if (sheetsConfig.enabled && sheetsConfig.apiKey && sheetsConfig.spreadsheetId) {
                    loadPlayersFromSheet();
                }
            }, []);

            const testSheetsConnection = async () => {
                if (!sheetsConfig.apiKey || !sheetsConfig.spreadsheetId) {
                    alert('Please enter both API Key and Spreadsheet ID first.');
                    return;
                }

                try {
                    // Try to read the spreadsheet to test connection
                    const url = `https://sheets.googleapis.com/v4/spreadsheets/${sheetsConfig.spreadsheetId}?key=${sheetsConfig.apiKey}`;
                    
                    const response = await fetch(url);
                    const data = await response.json();

                    if (response.ok) {
                        // Check if required sheets exist
                        const sheetNames = data.sheets.map(s => s.properties.title);
                        const hasGames = sheetNames.includes('Games');
                        const hasPlayers = sheetNames.includes('Players');

                        if (hasGames && hasPlayers) {
                            alert(`‚úÖ SUCCESS!\n\nConnection verified!\nSpreadsheet: ${data.properties.title}\nFound sheets: ${sheetNames.join(', ')}\n\nYour configuration is working correctly!`);
                        } else {
                            alert(`‚ö†Ô∏è PARTIAL SUCCESS\n\nConnection works, but missing required sheets.\n\nFound: ${sheetNames.join(', ')}\n\nPlease add these sheets:\n${!hasGames ? '- Games\n' : ''}${!hasPlayers ? '- Players\n' : ''}`);
                        }
                    } else {
                        if (data.error) {
                            if (data.error.code === 403) {
                                alert(`‚ùå PERMISSION ERROR\n\n${data.error.message}\n\nMake sure:\n1. Google Sheets API is enabled in Cloud Console\n2. Spreadsheet is shared as "Anyone with link can edit"\n3. API key is correct`);
                            } else if (data.error.code === 404) {
                                alert(`‚ùå NOT FOUND\n\nSpreadsheet ID is incorrect or doesn't exist.\n\nDouble-check the ID in your spreadsheet URL.`);
                            } else {
                                alert(`‚ùå ERROR ${data.error.code}\n\n${data.error.message}`);
                            }
                        } else {
                            alert('‚ùå Unknown error occurred. Check your API key and Spreadsheet ID.');
                        }
                    }
                } catch (error) {
                    alert(`‚ùå CONNECTION FAILED\n\nError: ${error.message}\n\nPossible causes:\n- No internet connection\n- API key is invalid\n- Spreadsheet ID is wrong\n- CORS/browser blocking (try different browser)`);
                }
            };

            const getPlayerStats = (playerId) => {
                const player = players.find(p => p.id === playerId);
                if (!player || player.stats.rounds === 0) return null;
                
                return {
                    ...player,
                    avgScore: player.stats.avgScore.toFixed(1)
                };
            };

            // Render team adjustment view
            const renderTeamAdjustment = () => (
                <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow p-6">
                        <h2 className="text-xl font-bold mb-4">Adjust Teams</h2>
                        <p className="text-sm text-gray-600 mb-4">Click on a player to swap them to the other team</p>
                        
                        <div className="grid grid-cols-2 gap-4">
                            <div className="border-2 border-blue-500 rounded p-4">
                                <h3 className="font-bold text-lg mb-3 text-blue-600">Team 1</h3>
                                <div className="space-y-2">
                                    {teams.team1.map(player => (
                                        <div 
                                            key={player.id}
                                            className="p-2 bg-blue-50 rounded hover:bg-blue-100 cursor-pointer"
                                            onClick={() => swapPlayer(player.id, 'team1')}
                                        >
                                            <div className="font-medium">{player.name}</div>
                                            
                                        </div>
                                    ))}
                                </div>
                                <div className="mt-3 text-sm text-gray-600">
                                    Players: {teams.team1.length}
                                </div>
                            </div>

                            <div className="border-2 border-green-500 rounded p-4">
                                <h3 className="font-bold text-lg mb-3 text-green-600">Team 2</h3>
                                <div className="space-y-2">
                                    {teams.team2.map(player => (
                                        <div 
                                            key={player.id}
                                            className="p-2 bg-green-50 rounded hover:bg-green-100 cursor-pointer"
                                            onClick={() => swapPlayer(player.id, 'team2')}
                                        >
                                            <div className="font-medium">{player.name}</div>
                                            
                                        </div>
                                    ))}
                                </div>
                                <div className="mt-3 text-sm text-gray-600">
                                    Players: {teams.team1.length}
                                </div>
                            </div>
                        </div>

                        <div className="mt-6 p-4 bg-yellow-50 rounded">
                            <h3 className="font-medium mb-2">Nassau Format - Two Down Automatic Press</h3>
                            <div className="text-sm text-gray-700 space-y-1">
                                <p>‚Ä¢ Three main bets: Front 9, Back 9, and Total (18 holes)</p>
                                <p>‚Ä¢ When a team falls 2 holes down on any bet, a new "press" bet starts automatically</p>
                                <p>‚Ä¢ Press bets are worth the same amount as the original bet</p>
                                <p>‚Ä¢ Multiple presses can occur if a team continues to fall behind</p>
                                <p>‚Ä¢ Each bet: ${gameSettings.betAmount} per player</p>
                            </div>
                        </div>

                        <button
                            onClick={() => setView('game')}
                            className="w-full mt-4 bg-green-600 text-white rounded px-4 py-3 flex items-center justify-center gap-2 hover:bg-green-700"
                        >
                            <Play /> Start Game with These Teams
                        </button>
                    </div>
                </div>
            );

            // Render setup view
            const renderSetup = () => (
                <div className="space-y-6">
                    <div className="bg-white rounded-lg shadow p-6">
                        <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
                            <Users /> Player Management
                        </h2>

                        {sheetsConfig.enabled && sheetsConfig.apiKey && sheetsConfig.spreadsheetId && (
                            <div className="mb-4 p-3 bg-blue-50 border border-blue-200 rounded flex justify-between items-center">
                                <span className="text-sm text-gray-700">
                                    üìä Google Sheets connected - Players auto-load from your spreadsheet
                                </span>
                                <button
                                    onClick={loadPlayersFromSheet}
                                    className="bg-blue-600 text-white rounded px-3 py-1 hover:bg-blue-700 text-sm"
                                >
                                    üîÑ Refresh
                                </button>
                            </div>
                        )}
                        
                        <div className="grid grid-cols-2 gap-2 mb-4">
                            <input
                                type="text"
                                placeholder="Player Name"
                                className="border rounded px-3 py-2"
                                value={newPlayer.name}
                                onChange={(e) => setNewPlayer({...newPlayer, name: e.target.value})}
                            />
                            <button
                                onClick={addPlayer}
                                className="bg-green-600 text-white rounded px-4 py-2 flex items-center justify-center gap-2 hover:bg-green-700"
                            >
                                <Plus /> Add Player
                            </button>
                        </div>

                        <div className="border rounded divide-y max-h-96 overflow-y-auto">
                            {players.map(player => (
                                <div key={player.id} className="p-3 flex items-center justify-between hover:bg-gray-50">
                                    {editingPlayer === player.id ? (
                                        <div className="flex items-center gap-2 flex-1">
                                            <input
                                                type="checkbox"
                                                checked={selectedPlayers.includes(player.id)}
                                                onChange={() => togglePlayerSelection(player.id)}
                                                className="w-4 h-4"
                                            />
                                            <input
                                                type="text"
                                                className="border rounded px-2 py-1 flex-1"
                                                value={player.name}
                                                onChange={(e) => updatePlayer(player.id, { name: e.target.value })}
                                                placeholder="Player Name"
                                            />
                                            <button
                                                onClick={() => setEditingPlayer(null)}
                                                className="text-green-600 hover:text-green-800 text-sm px-2 py-1"
                                            >
                                                Done
                                            </button>
                                        </div>
                                    ) : (
                                        <>
                                            <div className="flex items-center gap-4 flex-1">
                                                <input
                                                    type="checkbox"
                                                    checked={selectedPlayers.includes(player.id)}
                                                    onChange={() => togglePlayerSelection(player.id)}
                                                    className="w-4 h-4"
                                                />
                                                <span className="font-medium">{player.name}</span>
                                                
                                                
                                            </div>
                                            <div className="flex gap-2">
                                                <button
                                                    onClick={() => setEditingPlayer(player.id)}
                                                    className="text-blue-600 hover:text-blue-800 text-sm"
                                                >
                                                    Edit
                                                </button>
                                                <button
                                                    onClick={() => deletePlayer(player.id)}
                                                    className="text-red-600 hover:text-red-800"
                                                >
                                                    <Trash2 />
                                                </button>
                                            </div>
                                        </>
                                    )}
                                </div>
                            ))}
                        </div>
                    </div>

                    {selectedPlayers.length >= 4 && (
                        <div className="bg-white rounded-lg shadow p-6">
                            <h2 className="text-xl font-bold mb-4">Game Settings</h2>
                            
                            <div className="grid grid-cols-2 gap-4 mb-4">
                                <div>
                                    <label className="block text-sm font-medium mb-1">Number of Bets</label>
                                    <input
                                        type="number"
                                        min="1"
                                        max={Math.floor(selectedPlayers.length / 2)}
                                        className="border rounded px-3 py-2 w-full"
                                        value={gameSettings.numBets}
                                        onChange={(e) => {
                                            const numBets = parseInt(e.target.value);
                                            const playersPerTeam = Math.floor(selectedPlayers.length / 2);
                                            const betConfig = generateBetConfiguration(numBets, playersPerTeam);
                                            setGameSettings({...gameSettings, numBets, betConfiguration: betConfig});
                                        }}
                                    />
                                </div>
                                <div>
                                    <label className="block text-sm font-medium mb-1">Bet Amount ($)</label>
                                    <input
                                        type="number"
                                        className="border rounded px-3 py-2 w-full"
                                        value={gameSettings.betAmount}
                                        onChange={(e) => setGameSettings({...gameSettings, betAmount: parseFloat(e.target.value)})}
                                    />
                                </div>
                            </div>

                            {gameSettings.betConfiguration.length > 0 && (
                                <div className="mb-4 p-4 bg-blue-50 rounded">
                                    <h3 className="font-medium mb-3">Configure Bet Matchups:</h3>
                                    <p className="text-sm text-gray-600 mb-3">
                                        Select which player positions (by score ranking) to combine for each bet.
                                    </p>
                                    {gameSettings.betConfiguration.map((bet, idx) => (
                                        <div key={bet.betNumber} className="mb-3 p-3 bg-white rounded border">
                                            <label className="block text-sm font-medium mb-2">
                                                Bet {bet.betNumber} - Select Player Positions:
                                            </label>
                                            <div className="flex flex-wrap gap-2 mb-2">
                                                {Array.from({ length: Math.floor(selectedPlayers.length / 2) }, (_, i) => i).map(position => (
                                                    <label key={position} className="flex items-center gap-1 px-2 py-1 bg-gray-100 rounded">
                                                        <input
                                                            type="checkbox"
                                                            checked={bet.players.includes(position)}
                                                            onChange={(e) => {
                                                                const newConfig = [...gameSettings.betConfiguration];
                                                                if (e.target.checked) {
                                                                    newConfig[idx].players = [...bet.players, position].sort((a, b) => a - b);
                                                                } else {
                                                                    newConfig[idx].players = bet.players.filter(p => p !== position);
                                                                }
                                                                newConfig[idx].description = `Best ${newConfig[idx].players.map(p => p + 1).join(', ')} ball${newConfig[idx].players.length > 1 ? 's' : ''}`;
                                                                setGameSettings({...gameSettings, betConfiguration: newConfig});
                                                            }}
                                                        />
                                                        <span className="text-sm">{position + 1}</span>
                                                    </label>
                                                ))}
                                            </div>
                                            <div className="text-sm text-gray-600">
                                                {bet.players.length > 0 ? (
                                                    <span>Using: {bet.players.map(p => {
                                                        const ordinal = ['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th'][p] || `${p+1}th`;
                                                        return ordinal;
                                                    }).join(', ')} best score{bet.players.length > 1 ? 's' : ''}</span>
                                                ) : (
                                                    <span className="text-orange-600">‚ö† No positions selected for this bet</span>
                                                )}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}

                            <div className="space-y-2 mb-4">
                                <label className="flex items-center gap-2">
                                    <input
                                        type="checkbox"
                                        checked={gameSettings.birdieBonus}
                                        onChange={(e) => setGameSettings({...gameSettings, birdieBonus: e.target.checked})}
                                    />
                                    <span>Birdie Bonus (Birdie=1 bet, Eagle=2 bets, Double Eagle=3 bets)</span>
                                </label>
                                
                                <label className="flex items-center gap-2">
                                    <input
                                        type="checkbox"
                                        checked={gameSettings.parOrBetterBonus}
                                        onChange={(e) => setGameSettings({...gameSettings, parOrBetterBonus: e.target.checked})}
                                    />
                                    <span>Par or Better Bonus (team combined score at or below par)</span>
                                </label>
                                
                                <label className="flex items-center gap-2">
                                    <input
                                        type="checkbox"
                                        checked={gameSettings.allBalls}
                                        onChange={(e) => setGameSettings({...gameSettings, allBalls: e.target.checked})}
                                    />
                                    <span>All Balls Bet (one hole on front, one on back - all players count)</span>
                                </label>
                                
                                {gameSettings.allBalls && (
                                    <div className="ml-6 grid grid-cols-2 gap-2">
                                        <div>
                                            <label className="block text-sm">Front Nine Hole</label>
                                            <input
                                                type="number"
                                                min="1"
                                                max="9"
                                                className="border rounded px-3 py-2 w-full"
                                                value={gameSettings.allBallsFront || ''}
                                                onChange={(e) => setGameSettings({...gameSettings, allBallsFront: parseInt(e.target.value)})}
                                            />
                                        </div>
                                        <div>
                                            <label className="block text-sm">Back Nine Hole</label>
                                            <input
                                                type="number"
                                                min="10"
                                                max="18"
                                                className="border rounded px-3 py-2 w-full"
                                                value={gameSettings.allBallsBack || ''}
                                                onChange={(e) => setGameSettings({...gameSettings, allBallsBack: parseInt(e.target.value)})}
                                            />
                                        </div>
                                    </div>
                                )}
                            </div>

                            <button
                                onClick={() => {
                                    createTeams();
                                    setView('teams');
                                }}
                                className="w-full bg-blue-600 text-white rounded px-4 py-3 flex items-center justify-center gap-2 hover:bg-blue-700"
                            >
                                <Play /> Create Teams
                            </button>
                        </div>
                    )}
                </div>
            );

            // Render game view
            const renderGame = () => {
                const moneyStatus = calculateMoneyStatus(currentHole);
                const currentHoleData = courseData.holes[currentHole - 1];
                const betsStatus = getTotalBetsStatus();
                
                // Grid View Mode
                if (scoreEntryMode === 'grid') {
                    return (
                        <div className="space-y-4">
                            <div className="bg-white rounded-lg shadow p-4">
                                <div className="flex justify-between items-center mb-4">
                                    <h2 className="text-2xl font-bold">Score Entry - Grid Mode</h2>
                                    <div className="flex gap-2">
                                        <button
                                            onClick={() => setScoreEntryMode('hole-by-hole')}
                                            className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
                                        >
                                            Switch to Hole-by-Hole
                                        </button>
                                        <button
                                            onClick={finalizeGame}
                                            className="px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700"
                                        >
                                            <Save /> Finalize Game
                                        </button>
                                    </div>
                                </div>

                                <div className="overflow-x-auto">
                                    <table className="w-full text-sm border-collapse">
                                        <thead className="bg-gray-200 sticky top-0">
                                            <tr>
                                                <th className="p-2 text-left sticky left-0 bg-gray-200 z-20 border">Player</th>
                                                <th className="p-2 text-center bg-blue-100 border">Team</th>
                                                {courseData.holes.slice(0, 9).map(h => (
                                                    <th key={h.hole} className="p-2 text-center min-w-[50px] border">
                                                        <div className="font-bold">{h.hole}</div>
                                                        <div className="text-xs text-gray-500">P{h.par}</div>
                                                    </th>
                                                ))}
                                                <th className="p-2 text-center bg-orange-100 font-bold border">OUT</th>
                                                {courseData.holes.slice(9, 18).map(h => (
                                                    <th key={h.hole} className="p-2 text-center min-w-[50px] border">
                                                        <div className="font-bold">{h.hole}</div>
                                                        <div className="text-xs text-gray-500">P{h.par}</div>
                                                    </th>
                                                ))}
                                                <th className="p-2 text-center bg-orange-100 font-bold border">IN</th>
                                                <th className="p-2 text-center bg-yellow-100 font-bold border">TOT</th>
                                                <th className="p-2 text-center bg-green-100 font-bold border">$$</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {[...teams.team1, ...teams.team2].map((player, pIdx) => {
                                                const isTeam1 = teams.team1.includes(player);
                                                const playerScores = scores[player.id] || Array(18).fill(null);
                                                const front9 = playerScores.slice(0, 9).reduce((sum, s) => sum + (s || 0), 0);
                                                const back9 = playerScores.slice(9, 18).reduce((sum, s) => sum + (s || 0), 0);
                                                const total = front9 + back9;
                                                
                                                // Calculate money for this player
                                                const moneyStatus = calculateMoneyStatus(18);
                                                const playerMoney = moneyStatus[player.id] || 0;
                                                
                                                return (
                                                    <tr key={player.id} className={pIdx % 2 === 0 ? 'bg-gray-50' : 'bg-white'}>
                                                        <td className={`p-2 font-medium sticky left-0 z-10 border ${pIdx % 2 === 0 ? 'bg-gray-50' : 'bg-white'} ${isTeam1 ? 'text-blue-600' : 'text-green-600'}`}>
                                                            {player.name}
                                                        </td>
                                                        <td className={`p-2 text-center border ${isTeam1 ? 'bg-blue-100 text-blue-700' : 'bg-green-100 text-green-700'}`}>
                                                            {isTeam1 ? 'T1' : 'T2'}
                                                        </td>
                                                        {/* Front 9 */}
                                                        {courseData.holes.slice(0, 9).map((h, hIdx) => {
                                                            const score = playerScores[hIdx];
                                                            const scoreColor = getScoreColor(score, hIdx + 1);
                                                            
                                                            return (
                                                                <td key={h.hole} className="p-1 text-center border">
                                                                    <input
                                                                        type="number"
                                                                        min="1"
                                                                        max="15"
                                                                        value={score || ''}
                                                                        onChange={(e) => updateScore(player.id, h.hole, e.target.value)}
                                                                        className={`w-12 text-center p-1 border rounded ${scoreColor}`}
                                                                        style={{fontSize: '14px'}}
                                                                    />
                                                                </td>
                                                            );
                                                        })}
                                                        <td className="p-2 text-center font-bold bg-orange-50 border">{front9 || '-'}</td>
                                                        {/* Back 9 */}
                                                        {courseData.holes.slice(9, 18).map((h, hIdx) => {
                                                            const score = playerScores[hIdx + 9];
                                                            const scoreColor = getScoreColor(score, hIdx + 10);
                                                            
                                                            return (
                                                                <td key={h.hole} className="p-1 text-center border">
                                                                    <input
                                                                        type="number"
                                                                        min="1"
                                                                        max="15"
                                                                        value={score || ''}
                                                                        onChange={(e) => updateScore(player.id, h.hole, e.target.value)}
                                                                        className={`w-12 text-center p-1 border rounded ${scoreColor}`}
                                                                        style={{fontSize: '14px'}}
                                                                    />
                                                                </td>
                                                            );
                                                        })}
                                                        <td className="p-2 text-center font-bold bg-orange-50 border">{back9 || '-'}</td>
                                                        <td className="p-2 text-center font-bold bg-yellow-50 border">{total}</td>
                                                        <td className={`p-2 text-center font-bold border ${playerMoney >= 0 ? 'text-green-600 bg-green-50' : 'text-red-600 bg-red-50'}`}>
                                                            {playerMoney >= 0 ? `+$${playerMoney.toFixed(0)}` : `-$${Math.abs(playerMoney).toFixed(0)}`}
                                                        </td>
                                                    </tr>
                                                );
                                            })}
                                        </tbody>
                                    </table>
                                </div>

                                <div className="mt-4 p-4 bg-blue-50 rounded text-sm">
                                    <strong>Grid Mode Tips:</strong> Enter all scores at once ‚Ä¢ Tab to move between cells ‚Ä¢ 
                                    Red scores = under par ‚Ä¢ All changes auto-save
                                </div>
                            </div>

                            {/* Bet Status Summary */}
                            <div className="bg-gradient-to-r from-blue-50 to-green-50 rounded-lg shadow p-4">
                                <h3 className="font-bold text-lg mb-2">Current Bet Status</h3>
                                <div className="grid grid-cols-3 gap-4 text-center">
                                    <div className="bg-blue-100 rounded p-3">
                                        <div className="text-sm text-gray-600">Team 1</div>
                                        <div className="text-2xl font-bold text-blue-600">{betsStatus.team1Total}</div>
                                    </div>
                                    <div className="bg-white rounded p-3">
                                        <div className="text-sm text-gray-600">Net</div>
                                        <div className={`text-2xl font-bold ${betsStatus.netBets > 0 ? 'text-blue-600' : betsStatus.netBets < 0 ? 'text-green-600' : 'text-gray-600'}`}>
                                            {betsStatus.netBets > 0 ? `T1 +${betsStatus.netBets}` : betsStatus.netBets < 0 ? `T2 +${Math.abs(betsStatus.netBets)}` : 'Even'}
                                        </div>
                                    </div>
                                    <div className="bg-green-100 rounded p-3">
                                        <div className="text-sm text-gray-600">Team 2</div>
                                        <div className="text-2xl font-bold text-green-600">{betsStatus.team2Total}</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    );
                }
                
                // Original Hole-by-Hole Mode
                return (
                    <div className="space-y-4">
                        <div className="bg-white rounded-lg shadow p-4">
                            <div className="flex justify-between items-center mb-4">
                                <div>
                                    <h2 className="text-2xl font-bold">Hole {currentHole}</h2>
                                    <div className="text-sm text-gray-600">
                                        Par {currentHoleData.par} ‚Ä¢ Handicap {currentHoleData.handicap}
                                    </div>
                                </div>
                                <div className="flex gap-2">
                                    <button
                                        onClick={() => setScoreEntryMode('grid')}
                                        className="px-3 py-1 bg-purple-600 text-white rounded hover:bg-purple-700 text-sm"
                                    >
                                        Grid View
                                    </button>
                                    <button
                                        onClick={() => setCurrentHole(Math.max(1, currentHole - 1))}
                                        className="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300"
                                        disabled={currentHole === 1}
                                    >
                                        Previous
                                    </button>
                                    <button
                                        onClick={() => setCurrentHole(Math.min(18, currentHole + 1))}
                                        className="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300"
                                        disabled={currentHole === 18}
                                    >
                                        Next
                                    </button>
                                </div>
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                                <div className="border rounded p-4">
                                    <h3 className="font-bold mb-3 text-lg text-blue-600">Team 1</h3>
                                    {teams.team1.map(player => {
                                        const playerScore = scores[player.id][currentHole - 1];
                                        const bonus = getBirdieBonus(playerScore, currentHole);
                                        return (
                                            <div key={player.id} className="mb-2">
                                                <label className="block text-sm font-medium mb-1">
                                                    {player.name} (HC: {player.handicap})
                                                </label>
                                                <div className="flex gap-2 items-center">
                                                    <input
                                                        type="number"
                                                        className={`border rounded px-3 py-2 w-24 ${getScoreColor(playerScore, currentHole)}`}
                                                        value={playerScore || ''}
                                                        onChange={(e) => updateScore(player.id, currentHole, e.target.value)}
                                                    />
                                                    {playerScore && (
                                                        <span className={`text-sm font-medium ${getScoreColor(playerScore, currentHole)}`}>
                                                            {getScoreToPar(playerScore, currentHole)}
                                                        </span>
                                                    )}
                                                    {bonus && (
                                                        <span className="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded">
                                                            {bonus.text} (+{bonus.bets})
                                                        </span>
                                                    )}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>

                                <div className="border rounded p-4">
                                    <h3 className="font-bold mb-3 text-lg text-green-600">Team 2</h3>
                                    {teams.team2.map(player => {
                                        const playerScore = scores[player.id][currentHole - 1];
                                        const bonus = getBirdieBonus(playerScore, currentHole);
                                        return (
                                            <div key={player.id} className="mb-2">
                                                <label className="block text-sm font-medium mb-1">
                                                    {player.name} (HC: {player.handicap})
                                                </label>
                                                <div className="flex gap-2 items-center">
                                                    <input
                                                        type="number"
                                                        className={`border rounded px-3 py-2 w-24 ${getScoreColor(playerScore, currentHole)}`}
                                                        value={playerScore || ''}
                                                        onChange={(e) => updateScore(player.id, currentHole, e.target.value)}
                                                    />
                                                    {playerScore && (
                                                        <span className={`text-sm font-medium ${getScoreColor(playerScore, currentHole)}`}>
                                                            {getScoreToPar(playerScore, currentHole)}
                                                        </span>
                                                    )}
                                                    {bonus && (
                                                        <span className="text-xs bg-yellow-100 text-yellow-800 px-2 py-1 rounded">
                                                            {bonus.text} (+{bonus.bets})
                                                        </span>
                                                    )}
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        </div>

                        {/* Bet Status Summary */}
                        <div className="bg-gradient-to-r from-blue-50 to-green-50 rounded-lg shadow p-4">
                            <h3 className="font-bold text-lg mb-2">Bet Status</h3>
                            <div className="grid grid-cols-3 gap-4 text-center">
                                <div className="bg-blue-100 rounded p-3">
                                    <div className="text-sm text-gray-600">Team 1</div>
                                    <div className="text-2xl font-bold text-blue-600">{betsStatus.team1Total}</div>
                                </div>
                                <div className="bg-white rounded p-3">
                                    <div className="text-sm text-gray-600">Net</div>
                                    <div className={`text-2xl font-bold ${betsStatus.netBets > 0 ? 'text-blue-600' : betsStatus.netBets < 0 ? 'text-green-600' : 'text-gray-600'}`}>
                                        {betsStatus.netBets > 0 ? `T1 +${betsStatus.netBets}` : betsStatus.netBets < 0 ? `T2 +${Math.abs(betsStatus.netBets)}` : 'Even'}
                                    </div>
                                </div>
                                <div className="bg-green-100 rounded p-3">
                                    <div className="text-sm text-gray-600">Team 2</div>
                                    <div className="text-2xl font-bold text-green-600">{betsStatus.team2Total}</div>
                                </div>
                            </div>
                        </div>

                        {/* Match Scorecard */}
                        <div className="bg-white rounded-lg shadow p-4">
                            <h3 className="font-bold text-lg mb-3">Match Scorecard</h3>
                            
                            {/* Player Scores with Color-Coded Matchups */}
                            <div className="mb-6">
                                <h4 className="font-semibold text-sm mb-2 text-gray-900">Individual Player Scores</h4>
                                <div className="overflow-x-auto">
                                    <table className="w-full text-sm border">
                                        <thead className="bg-gray-200">
                                            <tr>
                                                <th className="p-2 border text-left sticky left-0 bg-gray-200 min-w-[100px]">Player</th>
                                                {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => (
                                                    <th key={hole} className={`p-2 border text-center min-w-[45px] ${hole === currentHole ? 'bg-yellow-200' : ''}`}>
                                                        {hole}
                                                    </th>
                                                ))}
                                                <th className="p-2 border text-center font-bold bg-gray-300 min-w-[60px]">Total</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {/* Team 1 Players */}
                                            {teams.team1.map(player => (
                                                <tr key={player.id} className="hover:bg-blue-50">
                                                    <td className="p-2 border font-medium sticky left-0 bg-white text-blue-600">
                                                        {player.name}
                                                    </td>
                                                    {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => {
                                                        const score = scores[player.id][hole - 1];
                                                        const par = courseData.holes[hole - 1].par;
                                                        
                                                        // Determine which matchup this player is in (if any)
                                                        const team1Scores = teams.team1
                                                            .map(p => ({ id: p.id, score: scores[p.id][hole - 1] }))
                                                            .filter(s => s.score !== null)
                                                            .sort((a, b) => a.score - b.score);
                                                        
                                                        const playerRank = team1Scores.findIndex(s => s.id === player.id);
                                                        
                                                        // Find which bet matchup includes this rank
                                                        let matchupColor = '';
                                                        gameSettings.betConfiguration.forEach((bet, idx) => {
                                                            if (bet.players.includes(playerRank)) {
                                                                const colors = ['bg-purple-200', 'bg-pink-200', 'bg-orange-200', 'bg-cyan-200', 'bg-lime-200'];
                                                                matchupColor = colors[idx % colors.length];
                                                            }
                                                        });
                                                        
                                                        const scoreClass = score < par ? 'text-red-600 font-bold' : 
                                                                          score === par ? 'text-black' : 'text-gray-700';
                                                        
                                                        return (
                                                            <td key={hole} className={`p-2 border text-center ${hole === currentHole ? 'bg-yellow-100' : ''} ${matchupColor}`}>
                                                                {score !== null ? <span className={scoreClass}>{score}</span> : '-'}
                                                            </td>
                                                        );
                                                    })}
                                                    <td className="p-2 border text-center font-bold bg-blue-50">
                                                        {scores[player.id].slice(0, currentHole).reduce((sum, s) => sum + (s || 0), 0)}
                                                    </td>
                                                </tr>
                                            ))}
                                            
                                            {/* Team 2 Players */}
                                            {teams.team2.map(player => (
                                                <tr key={player.id} className="hover:bg-green-50">
                                                    <td className="p-2 border font-medium sticky left-0 bg-white text-green-600">
                                                        {player.name}
                                                    </td>
                                                    {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => {
                                                        const score = scores[player.id][hole - 1];
                                                        const par = courseData.holes[hole - 1].par;
                                                        
                                                        // Determine which matchup this player is in (if any)
                                                        const team2Scores = teams.team2
                                                            .map(p => ({ id: p.id, score: scores[p.id][hole - 1] }))
                                                            .filter(s => s.score !== null)
                                                            .sort((a, b) => a.score - b.score);
                                                        
                                                        const playerRank = team2Scores.findIndex(s => s.id === player.id);
                                                        
                                                        // Find which bet matchup includes this rank
                                                        let matchupColor = '';
                                                        gameSettings.betConfiguration.forEach((bet, idx) => {
                                                            if (bet.players.includes(playerRank)) {
                                                                const colors = ['bg-purple-200', 'bg-pink-200', 'bg-orange-200', 'bg-cyan-200', 'bg-lime-200'];
                                                                matchupColor = colors[idx % colors.length];
                                                            }
                                                        });
                                                        
                                                        const scoreClass = score < par ? 'text-red-600 font-bold' : 
                                                                          score === par ? 'text-black' : 'text-gray-700';
                                                        
                                                        return (
                                                            <td key={hole} className={`p-2 border text-center ${hole === currentHole ? 'bg-yellow-100' : ''} ${matchupColor}`}>
                                                                {score !== null ? <span className={scoreClass}>{score}</span> : '-'}
                                                            </td>
                                                        );
                                                    })}
                                                    <td className="p-2 border text-center font-bold bg-green-50">
                                                        {scores[player.id].slice(0, currentHole).reduce((sum, s) => sum + (s || 0), 0)}
                                                    </td>
                                                </tr>
                                            ))}
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            {/* Matchup Totals with Money Status */}
                            <div className="mb-6">
                                <h4 className="font-semibold text-sm mb-2 text-blue-900">Bet Matchups - Combined Scores & Money</h4>
                                <div className="overflow-x-auto">
                                    <table className="w-full text-sm border">
                                        <thead className="bg-gray-200">
                                            <tr>
                                                <th className="p-2 border text-left sticky left-0 bg-gray-200">Matchup</th>
                                                {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => (
                                                    <th key={hole} className={`p-2 border text-center min-w-[70px] ${hole === currentHole ? 'bg-yellow-200' : ''}`}>
                                                        {hole}
                                                    </th>
                                                ))}
                                                <th className="p-2 border text-center font-bold bg-gray-300">Money</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {gameSettings.betConfiguration.map((betConfig, betIdx) => {
                                                let runningStatus = 0;
                                                const ordinals = betConfig.players.map(p => {
                                                    const ord = ['1st', '2nd', '3rd', '4th', '5th', '6th', '7th', '8th'][p] || `${p+1}th`;
                                                    return ord;
                                                });
                                                const colors = ['bg-purple-100', 'bg-pink-100', 'bg-orange-100', 'bg-cyan-100', 'bg-lime-100'];
                                                const bgColor = colors[betIdx % colors.length];
                                                
                                                return (
                                                    <tr key={betIdx} className={`hover:opacity-80 ${bgColor}`}>
                                                        <td className={`p-2 border font-medium sticky left-0 text-xs ${bgColor}`}>
                                                            Bet {betIdx + 1}: {ordinals.join('+')}
                                                        </td>
                                                        {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => {
                                                            const holeResults = getHoleWinner(hole);
                                                            if (!holeResults || holeResults.length === 0) {
                                                                return <td key={hole} className="p-2 border text-center text-xs">-</td>;
                                                            }

                                                            const result = holeResults[betIdx];
                                                            if (!result) {
                                                                return <td key={hole} className="p-2 border text-center text-xs">-</td>;
                                                            }

                                                            // Get the combined scores for display
                                                            const holeIndex = hole - 1;
                                                            let team1Scores = teams.team1
                                                                .map(p => scores[p.id][holeIndex])
                                                                .filter(s => s !== null)
                                                                .sort((a, b) => a - b);
                                                            
                                                            let team2Scores = teams.team2
                                                                .map(p => scores[p.id][holeIndex])
                                                                .filter(s => s !== null)
                                                                .sort((a, b) => a - b);

                                                            if (teams.hasOddPlayers) {
                                                                if (teams.teamWithExtra === 'team1' && team1Scores.length > team2Scores.length) {
                                                                    team1Scores = team1Scores.slice(0, -1);
                                                                } else if (teams.teamWithExtra === 'team2' && team2Scores.length > team1Scores.length) {
                                                                    team2Scores = team2Scores.slice(0, -1);
                                                                }
                                                            }

                                                            const team1BetScores = betConfig.players
                                                                .filter(pos => pos < team1Scores.length)
                                                                .map(pos => team1Scores[pos]);
                                                            
                                                            const team2BetScores = betConfig.players
                                                                .filter(pos => pos < team2Scores.length)
                                                                .map(pos => team2Scores[pos]);

                                                            const team1Total = team1BetScores.reduce((sum, s) => sum + s, 0);
                                                            const team2Total = team2BetScores.reduce((sum, s) => sum + s, 0);

                                                            let holeWinner = result.winner === 'team1' ? 'T1' : 
                                                                           result.winner === 'team2' ? 'T2' : 'AS';
                                                            
                                                            if (holeWinner === 'T1') runningStatus++;
                                                            else if (holeWinner === 'T2') runningStatus--;

                                                            return (
                                                                <td 
                                                                    key={hole} 
                                                                    className={`p-2 border text-center text-xs ${hole === currentHole ? 'bg-yellow-100' : ''}`}
                                                                >
                                                                    <div className={`font-bold ${
                                                                        holeWinner === 'T1' ? 'text-blue-600' : 
                                                                        holeWinner === 'T2' ? 'text-green-600' : 
                                                                        'text-gray-400'
                                                                    }`}>
                                                                        {team1Total} - {team2Total}
                                                                    </div>
                                                                </td>
                                                            );
                                                        })}
                                                        <td className={`p-2 border text-center font-bold ${
                                                            runningStatus > 0 ? 'text-blue-600' : 
                                                            runningStatus < 0 ? 'text-green-600' : 
                                                            'text-gray-600'
                                                        }`}>
                                                            {(() => {
                                                                const moneyAmount = Math.abs(runningStatus) * gameSettings.betAmount;
                                                                if (runningStatus > 0) return `T1 +$${moneyAmount}`;
                                                                if (runningStatus < 0) return `T2 +$${moneyAmount}`;
                                                                return 'Even';
                                                            })()}
                                                        </td>
                                                    </tr>
                                                );
                                            })}
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            {/* Nassau Bets */}
                            <div className="mb-6">
                                <h4 className="font-semibold text-sm mb-2 text-purple-900">Nassau Bets (2-Down Auto Press)</h4>
                                <div className="overflow-x-auto">
                                    <table className="w-full text-sm border">
                                        <thead className="bg-purple-100">
                                            <tr>
                                                <th className="p-2 border text-left sticky left-0 bg-purple-100">Bet</th>
                                                {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => (
                                                    <th key={hole} className={`p-2 border text-center min-w-[40px] ${hole === currentHole ? 'bg-yellow-200' : ''}`}>
                                                        {hole}
                                                    </th>
                                                ))}
                                                <th className="p-2 border text-center font-bold bg-purple-200">Money</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {activeBets.map(bet => {
                                                let runningStatus = 0;
                                                return (
                                                    <React.Fragment key={bet.id}>
                                                        <tr className="hover:bg-gray-50">
                                                            <td className="p-2 border font-medium sticky left-0 bg-white">{bet.name}</td>
                                                            {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => {
                                                                if (hole < bet.startHole || hole > bet.endHole) {
                                                                    return <td key={hole} className="p-2 border text-center bg-gray-100">-</td>;
                                                                }
                                                                
                                                                const holeResults = getHoleWinner(hole);
                                                                if (!holeResults || holeResults.length === 0) {
                                                                    return <td key={hole} className="p-2 border text-center">-</td>;
                                                                }

                                                                let netForHole = 0;
                                                                holeResults.forEach(result => {
                                                                    if (result.winner === 'team1') netForHole++;
                                                                    if (result.winner === 'team2') netForHole--;
                                                                });

                                                                let holeWinner = netForHole > 0 ? 'T1' : netForHole < 0 ? 'T2' : 'AS';
                                                                
                                                                if (holeWinner === 'T1') runningStatus++;
                                                                else if (holeWinner === 'T2') runningStatus--;

                                                                return (
                                                                    <td 
                                                                        key={hole} 
                                                                        className={`p-2 border text-center font-bold ${
                                                                            hole === currentHole ? 'bg-yellow-100' : ''
                                                                        } ${
                                                                            holeWinner === 'T1' ? 'text-blue-600' : 
                                                                            holeWinner === 'T2' ? 'text-green-600' : 
                                                                            'text-gray-400'
                                                                        }`}
                                                                    >
                                                                        {holeWinner}
                                                                    </td>
                                                                );
                                                            })}
                                                            <td className={`p-2 border text-center font-bold ${
                                                                runningStatus > 0 ? 'text-blue-600' : 
                                                                runningStatus < 0 ? 'text-green-600' : 
                                                                'text-gray-600'
                                                            }`}>
                                                                {(() => {
                                                                    const moneyAmount = Math.abs(runningStatus) * gameSettings.betAmount;
                                                                    if (runningStatus > 0) return `T1 +$${moneyAmount}`;
                                                                    if (runningStatus < 0) return `T2 +$${moneyAmount}`;
                                                                    return 'Even';
                                                                })()}
                                                            </td>
                                                        </tr>
                                                        {/* Show press indication when 2 down */}
                                                        {Math.abs(runningStatus) >= 2 && (
                                                            <tr className="bg-orange-50">
                                                                <td colSpan={currentHole + 2} className="p-2 border text-xs text-orange-700 italic">
                                                                    {runningStatus >= 2 ? '‚Üí Team 2 can press (2 down)' : '‚Üí Team 1 can press (2 down)'}
                                                                </td>
                                                            </tr>
                                                        )}
                                                    </React.Fragment>
                                                );
                                            })}
                                        </tbody>
                                    </table>
                                </div>
                            </div>

                            {/* Birdie Tracker */}
                            {gameSettings.birdieBonus && (
                                <div className="mb-6">
                                    <h4 className="font-semibold text-sm mb-2 text-yellow-700">Birdie/Eagle Tracker</h4>
                                    <div className="overflow-x-auto">
                                        <table className="w-full text-sm border">
                                            <thead className="bg-yellow-100">
                                                <tr>
                                                    <th className="p-2 border text-left sticky left-0 bg-yellow-100">Team</th>
                                                    {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => (
                                                        <th key={hole} className={`p-2 border text-center min-w-[40px] ${hole === currentHole ? 'bg-yellow-200' : ''}`}>
                                                            {hole}
                                                        </th>
                                                    ))}
                                                    <th className="p-2 border text-center font-bold bg-yellow-200">Total</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr className="hover:bg-blue-50">
                                                    <td className="p-2 border font-medium sticky left-0 bg-white text-blue-600">Team 1</td>
                                                    {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => {
                                                        const par = courseData.holes[hole - 1].par;
                                                        let count = 0;
                                                        
                                                        teams.team1.forEach(player => {
                                                            const score = scores[player.id][hole - 1];
                                                            if (score !== null && score < par) {
                                                                count++;
                                                            }
                                                        });
                                                        
                                                        return (
                                                            <td key={hole} className={`p-2 border text-center ${hole === currentHole ? 'bg-yellow-100' : ''}`}>
                                                                {count > 0 ? <span className="text-blue-600 font-bold">{count}</span> : '-'}
                                                            </td>
                                                        );
                                                    })}
                                                    <td className="p-2 border text-center font-bold bg-blue-50 text-blue-600">
                                                        {(() => {
                                                            let total = 0;
                                                            for (let hole = 1; hole <= currentHole; hole++) {
                                                                const par = courseData.holes[hole - 1].par;
                                                                teams.team1.forEach(player => {
                                                                    const score = scores[player.id][hole - 1];
                                                                    if (score !== null && score < par) {
                                                                        total++;
                                                                    }
                                                                });
                                                            }
                                                            return total;
                                                        })()}
                                                    </td>
                                                </tr>
                                                <tr className="hover:bg-green-50">
                                                    <td className="p-2 border font-medium sticky left-0 bg-white text-green-600">Team 2</td>
                                                    {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => {
                                                        const par = courseData.holes[hole - 1].par;
                                                        let count = 0;
                                                        
                                                        teams.team2.forEach(player => {
                                                            const score = scores[player.id][hole - 1];
                                                            if (score !== null && score < par) {
                                                                count++;
                                                            }
                                                        });
                                                        
                                                        return (
                                                            <td key={hole} className={`p-2 border text-center ${hole === currentHole ? 'bg-yellow-100' : ''}`}>
                                                                {count > 0 ? <span className="text-green-600 font-bold">{count}</span> : '-'}
                                                            </td>
                                                        );
                                                    })}
                                                    <td className="p-2 border text-center font-bold bg-green-50 text-green-600">
                                                        {(() => {
                                                            let total = 0;
                                                            for (let hole = 1; hole <= currentHole; hole++) {
                                                                const par = courseData.holes[hole - 1].par;
                                                                teams.team2.forEach(player => {
                                                                    const score = scores[player.id][hole - 1];
                                                                    if (score !== null && score < par) {
                                                                        total++;
                                                                    }
                                                                });
                                                            }
                                                            return total;
                                                        })()}
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            )}

                            {/* Par or Better Tracker */}
                            {gameSettings.parOrBetterBonus && (
                                <div className="mb-6">
                                    <h4 className="font-semibold text-sm mb-2 text-green-700">Par or Better Tracker</h4>
                                    <div className="overflow-x-auto">
                                        <table className="w-full text-sm border">
                                            <thead className="bg-green-100">
                                                <tr>
                                                    <th className="p-2 border text-left sticky left-0 bg-green-100">Team</th>
                                                    {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => (
                                                        <th key={hole} className={`p-2 border text-center min-w-[40px] ${hole === currentHole ? 'bg-green-200' : ''}`}>
                                                            {hole}
                                                        </th>
                                                    ))}
                                                    <th className="p-2 border text-center font-bold bg-green-200">Total</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr className="hover:bg-blue-50">
                                                    <td className="p-2 border font-medium sticky left-0 bg-white text-blue-600">Team 1</td>
                                                    {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => {
                                                        const par = courseData.holes[hole - 1].par;
                                                        const team1HoleScores = teams.team1
                                                            .map(p => scores[p.id][hole - 1])
                                                            .filter(s => s !== null);
                                                        
                                                        let won = false;
                                                        if (team1HoleScores.length === teams.team1.length) {
                                                            const team1Total = team1HoleScores.reduce((sum, s) => sum + s, 0);
                                                            const team1Par = par * teams.team1.length;
                                                            won = team1Total <= team1Par;
                                                        }
                                                        
                                                        return (
                                                            <td key={hole} className={`p-2 border text-center ${hole === currentHole ? 'bg-green-100' : ''}`}>
                                                                {won ? <span className="text-blue-600 font-bold">‚úì</span> : '-'}
                                                            </td>
                                                        );
                                                    })}
                                                    <td className="p-2 border text-center font-bold bg-blue-50 text-blue-600">
                                                        {(() => {
                                                            let total = 0;
                                                            for (let hole = 1; hole <= currentHole; hole++) {
                                                                const par = courseData.holes[hole - 1].par;
                                                                const team1HoleScores = teams.team1
                                                                    .map(p => scores[p.id][hole - 1])
                                                                    .filter(s => s !== null);
                                                                
                                                                if (team1HoleScores.length === teams.team1.length) {
                                                                    const team1Total_score = team1HoleScores.reduce((sum, s) => sum + s, 0);
                                                                    const team1Par = par * teams.team1.length;
                                                                    if (team1Total_score <= team1Par) {
                                                                        total++;
                                                                    }
                                                                }
                                                            }
                                                            return total;
                                                        })()}
                                                    </td>
                                                </tr>
                                                <tr className="hover:bg-green-50">
                                                    <td className="p-2 border font-medium sticky left-0 bg-white text-green-600">Team 2</td>
                                                    {Array.from({ length: currentHole }, (_, i) => i + 1).map(hole => {
                                                        const par = courseData.holes[hole - 1].par;
                                                        const team2HoleScores = teams.team2
                                                            .map(p => scores[p.id][hole - 1])
                                                            .filter(s => s !== null);
                                                        
                                                        let won = false;
                                                        if (team2HoleScores.length === teams.team2.length) {
                                                            const team2Total = team2HoleScores.reduce((sum, s) => sum + s, 0);
                                                            const team2Par = par * teams.team2.length;
                                                            won = team2Total <= team2Par;
                                                        }
                                                        
                                                        return (
                                                            <td key={hole} className={`p-2 border text-center ${hole === currentHole ? 'bg-green-100' : ''}`}>
                                                                {won ? <span className="text-green-600 font-bold">‚úì</span> : '-'}
                                                            </td>
                                                        );
                                                    })}
                                                    <td className="p-2 border text-center font-bold bg-green-50 text-green-600">
                                                        {(() => {
                                                            let total = 0;
                                                            for (let hole = 1; hole <= currentHole; hole++) {
                                                                const par = courseData.holes[hole - 1].par;
                                                                const team2HoleScores = teams.team2
                                                                    .map(p => scores[p.id][hole - 1])
                                                                    .filter(s => s !== null);
                                                                
                                                                if (team2HoleScores.length === teams.team2.length) {
                                                                    const team2Total_score = team2HoleScores.reduce((sum, s) => sum + s, 0);
                                                                    const team2Par = par * teams.team2.length;
                                                                    if (team2Total_score <= team2Par) {
                                                                        total++;
                                                                    }
                                                                }
                                                            }
                                                            return total;
                                                        })()}
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            )}

                            {/* All-Balls Bet Tracker */}
                            {gameSettings.allBalls && (gameSettings.allBallsFront || gameSettings.allBallsBack) && (
                                <div className="mb-6">
                                    <h4 className="font-semibold text-sm mb-2 text-red-700">All-Balls Bet</h4>
                                    <div className="overflow-x-auto">
                                        <table className="w-full text-sm border">
                                            <thead className="bg-red-100">
                                                <tr>
                                                    <th className="p-2 border text-left">Hole</th>
                                                    <th className="p-2 border text-center">Team 1 Total</th>
                                                    <th className="p-2 border text-center">Team 2 Total</th>
                                                    <th className="p-2 border text-center font-bold">Winner</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                {gameSettings.allBallsFront && currentHole >= gameSettings.allBallsFront && (
                                                    <tr className="hover:bg-gray-50">
                                                        <td className="p-2 border font-medium">Hole {gameSettings.allBallsFront} (Front)</td>
                                                        <td className="p-2 border text-center">
                                                            {(() => {
                                                                const hole = gameSettings.allBallsFront;
                                                                const scores_arr = teams.team1
                                                                    .map(p => scores[p.id][hole - 1])
                                                                    .filter(s => s !== null);
                                                                return scores_arr.length === teams.team1.length 
                                                                    ? scores_arr.reduce((sum, s) => sum + s, 0)
                                                                    : '-';
                                                            })()}
                                                        </td>
                                                        <td className="p-2 border text-center">
                                                            {(() => {
                                                                const hole = gameSettings.allBallsFront;
                                                                const scores_arr = teams.team2
                                                                    .map(p => scores[p.id][hole - 1])
                                                                    .filter(s => s !== null);
                                                                return scores_arr.length === teams.team2.length 
                                                                    ? scores_arr.reduce((sum, s) => sum + s, 0)
                                                                    : '-';
                                                            })()}
                                                        </td>
                                                        <td className="p-2 border text-center font-bold">
                                                            {(() => {
                                                                const hole = gameSettings.allBallsFront;
                                                                const team1Scores = teams.team1
                                                                    .map(p => scores[p.id][hole - 1])
                                                                    .filter(s => s !== null);
                                                                const team2Scores = teams.team2
                                                                    .map(p => scores[p.id][hole - 1])
                                                                    .filter(s => s !== null);
                                                                
                                                                if (team1Scores.length !== teams.team1.length || team2Scores.length !== teams.team2.length) {
                                                                    return '-';
                                                                }
                                                                
                                                                const team1Total = team1Scores.reduce((sum, s) => sum + s, 0);
                                                                const team2Total = team2Scores.reduce((sum, s) => sum + s, 0);
                                                                
                                                                if (team1Total < team2Total) return <span className="text-blue-600">Team 1</span>;
                                                                if (team2Total < team1Total) return <span className="text-green-600">Team 2</span>;
                                                                return 'Tie';
                                                            })()}
                                                        </td>
                                                    </tr>
                                                )}
                                                {gameSettings.allBallsBack && currentHole >= gameSettings.allBallsBack && (
                                                    <tr className="hover:bg-gray-50">
                                                        <td className="p-2 border font-medium">Hole {gameSettings.allBallsBack} (Back)</td>
                                                        <td className="p-2 border text-center">
                                                            {(() => {
                                                                const hole = gameSettings.allBallsBack;
                                                                const scores_arr = teams.team1
                                                                    .map(p => scores[p.id][hole - 1])
                                                                    .filter(s => s !== null);
                                                                return scores_arr.length === teams.team1.length 
                                                                    ? scores_arr.reduce((sum, s) => sum + s, 0)
                                                                    : '-';
                                                            })()}
                                                        </td>
                                                        <td className="p-2 border text-center">
                                                            {(() => {
                                                                const hole = gameSettings.allBallsBack;
                                                                const scores_arr = teams.team2
                                                                    .map(p => scores[p.id][hole - 1])
                                                                    .filter(s => s !== null);
                                                                return scores_arr.length === teams.team2.length 
                                                                    ? scores_arr.reduce((sum, s) => sum + s, 0)
                                                                    : '-';
                                                            })()}
                                                        </td>
                                                        <td className="p-2 border text-center font-bold">
                                                            {(() => {
                                                                const hole = gameSettings.allBallsBack;
                                                                const team1Scores = teams.team1
                                                                    .map(p => scores[p.id][hole - 1])
                                                                    .filter(s => s !== null);
                                                                const team2Scores = teams.team2
                                                                    .map(p => scores[p.id][hole - 1])
                                                                    .filter(s => s !== null);
                                                                
                                                                if (team1Scores.length !== teams.team1.length || team2Scores.length !== teams.team2.length) {
                                                                    return '-';
                                                                }
                                                                
                                                                const team1Total = team1Scores.reduce((sum, s) => sum + s, 0);
                                                                const team2Total = team2Scores.reduce((sum, s) => sum + s, 0);
                                                                
                                                                if (team1Total < team2Total) return <span className="text-blue-600">Team 1</span>;
                                                                if (team2Total < team1Total) return <span className="text-green-600">Team 2</span>;
                                                                return 'Tie';
                                                            })()}
                                                        </td>
                                                    </tr>
                                                )}
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            )}
                        </div>

                        {currentHole === 9 || currentHole === 18 ? (
                            <div className="bg-white rounded-lg shadow p-4">
                                <h3 className="font-bold text-lg mb-3">
                                    {currentHole === 9 ? 'Front 9' : 'Full Round'} Summary
                                </h3>
                                <div className="space-y-2">
                                    {[...teams.team1, ...teams.team2].map(player => {
                                        const playerScores = scores[player.id].slice(0, currentHole);
                                        const total = playerScores.reduce((sum, s) => sum + (s || 0), 0);
                                        const parTotal = currentHole === 9 ? courseData.frontNine : courseData.totalPar;
                                        const toPar = total - parTotal;
                                        const money = moneyStatus[player.id] || 0;
                                        
                                        return (
                                            <div key={player.id} className="flex justify-between items-center p-2 border-b">
                                                <span className="font-medium">{player.name}</span>
                                                <div className="flex gap-4">
                                                    <span>Score: {total}</span>
                                                    <span className={toPar < 0 ? 'text-red-600 font-bold' : 'text-gray-700'}>
                                                        ({toPar === 0 ? 'E' : toPar > 0 ? `+${toPar}` : toPar})
                                                    </span>
                                                    <span className={money >= 0 ? 'text-green-600' : 'text-red-600'}>
                                                        ${money.toFixed(2)}
                                                    </span>
                                                </div>
                                            </div>
                                        );
                                    })}
                                </div>
                            </div>
                        ) : null}

                        {currentHole === 18 && (
                            <button
                                onClick={finalizeGame}
                                className="w-full bg-green-600 text-white rounded px-4 py-3 flex items-center justify-center gap-2 hover:bg-green-700"
                            >
                                <Save /> Finalize Game
                            </button>
                        )}
                    </div>
                );
            };

            // Render stats view
            const renderStats = () => (
                <div className="space-y-4">
                    <div className="bg-white rounded-lg shadow p-6">
                        <h2 className="text-xl font-bold mb-4 flex items-center gap-2">
                            <Trophy /> Season Statistics
                        </h2>
                        
                        <div className="overflow-x-auto">
                            <table className="w-full">
                                <thead className="bg-gray-100">
                                    <tr>
                                        <th className="p-3 text-left">Player</th>
                                        <th className="p-3 text-center">Rounds</th>
                                        <th className="p-3 text-center">Avg Score</th>
                                        <th className="p-3 text-center">Low</th>
                                        <th className="p-3 text-center">High</th>
                                        <th className="p-3 text-center">Money Won/Lost</th>
                                    </tr>
                                </thead>
                                <tbody className="divide-y">
                                    {players
                                        .filter(p => p.stats.rounds > 0)
                                        .sort((a, b) => b.stats.moneyWon - a.stats.moneyWon)
                                        .map(player => {
                                            const stats = getPlayerStats(player.id);
                                            return (
                                                <tr key={player.id} className="hover:bg-gray-50">
                                                    <td className="p-3 font-medium">{player.name}</td>
                                                    <td className="p-3 text-center">{stats.stats.rounds}</td>
                                                    <td className="p-3 text-center">{stats.avgScore}</td>
                                                    <td className="p-3 text-center">{stats.stats.lowScore}</td>
                                                    <td className="p-3 text-center">{stats.stats.highScore}</td>
                                                    <td className={`p-3 text-center font-bold ${stats.stats.moneyWon >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                                                        ${stats.stats.moneyWon.toFixed(2)}
                                                    </td>
                                                </tr>
                                            );
                                        })}
                                </tbody>
                            </table>
                        </div>
                        {players.filter(p => p.stats.rounds > 0).length === 0 && (
                            <div className="text-center text-gray-500 py-8">
                                No completed games yet. Play some rounds to see statistics!
                            </div>
                        )}
                    </div>
                </div>
            );

            return (
                <div className="min-h-screen bg-gray-100 p-4">
                    <div className="max-w-6xl mx-auto">
                        <div className="banner-header shadow-lg mb-6">
                            <h1 className="text-4xl font-bold mb-2 text-white text-center drop-shadow-lg">Riverbend B Group Golf Tracker</h1>
                            <p className="text-green-100 text-center text-lg drop-shadow">Track scores, manage teams, and calculate winnings</p>
                        </div>

                        <div className="bg-white rounded-lg shadow mb-6">
                            <div className="flex border-b">
                                <button
                                    onClick={() => setView('setup')}
                                    className={`flex-1 py-3 px-4 font-medium ${view === 'setup' ? 'bg-blue-600 text-white' : 'text-gray-600 hover:bg-gray-100'}`}
                                >
                                    Setup
                                </button>
                                <button
                                    onClick={() => setView('teams')}
                                    className={`flex-1 py-3 px-4 font-medium ${view === 'teams' ? 'bg-blue-600 text-white' : 'text-gray-600 hover:bg-gray-100'}`}
                                    disabled={teams.team1.length === 0}
                                >
                                    Teams
                                </button>
                                <button
                                    onClick={() => setView('game')}
                                    className={`flex-1 py-3 px-4 font-medium ${view === 'game' ? 'bg-blue-600 text-white' : 'text-gray-600 hover:bg-gray-100'}`}
                                    disabled={teams.team1.length === 0}
                                >
                                    Game
                                </button>
                                <button
                                    onClick={() => setView('stats')}
                                    className={`flex-1 py-3 px-4 font-medium ${view === 'stats' ? 'bg-blue-600 text-white' : 'text-gray-600 hover:bg-gray-100'}`}
                                >
                                    Statistics
                                </button>
                                <button
                                    onClick={() => setShowSettings(true)}
                                    className="px-4 py-3 font-medium text-gray-600 hover:bg-gray-100 border-l"
                                    title="Google Sheets Settings"
                                >
                                    ‚öôÔ∏è
                                </button>
                            </div>
                        </div>

                        {/* Settings Modal */}
                        {showSettings && (
                            <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                                <div className="bg-white rounded-lg shadow-xl p-6 max-w-2xl w-full m-4">
                                    <h2 className="text-2xl font-bold mb-4">Google Sheets Integration</h2>
                                    
                                    <div className="mb-4">
                                        <label className="flex items-center gap-2 mb-4">
                                            <input
                                                type="checkbox"
                                                checked={sheetsConfig.enabled}
                                                onChange={(e) => setSheetsConfig({...sheetsConfig, enabled: e.target.checked})}
                                            />
                                            <span className="font-medium">Enable Google Sheets Auto-Save</span>
                                        </label>
                                    </div>

                                    {sheetsConfig.enabled && (
                                        <>
                                            <div className="mb-4 p-3 bg-yellow-50 border border-yellow-300 rounded">
                                                <h3 className="font-bold text-yellow-800 mb-1">‚ö†Ô∏è Important:</h3>
                                                <p className="text-sm text-yellow-700">API Keys are READ-ONLY and cannot write data. Use Apps Script method below for full functionality.</p>
                                            </div>

                                            <div className="mb-4">
                                                <label className="flex items-center gap-2 mb-2">
                                                    <input
                                                        type="checkbox"
                                                        checked={sheetsConfig.useAppsScript}
                                                        onChange={(e) => setSheetsConfig({...sheetsConfig, useAppsScript: e.target.checked})}
                                                    />
                                                    <span className="font-medium">Use Apps Script Web App (Recommended)</span>
                                                </label>
                                            </div>

                                            {sheetsConfig.useAppsScript ? (
                                                <>
                                                    <div className="mb-4">
                                                        <label className="block font-medium mb-2">Apps Script Web App URL</label>
                                                        <input
                                                            type="text"
                                                            className="w-full border rounded px-3 py-2"
                                                            placeholder="https://script.google.com/macros/s/.../exec"
                                                            value={sheetsConfig.webAppUrl}
                                                            onChange={(e) => setSheetsConfig({...sheetsConfig, webAppUrl: e.target.value})}
                                                        />
                                                        <p className="text-sm text-gray-600 mt-1">
                                                            From Apps Script deployment
                                                        </p>
                                                    </div>

                                                    <div className="bg-green-50 border border-green-300 rounded p-4 mb-4">
                                                        <h3 className="font-bold text-green-800 mb-2">‚úÖ Apps Script Setup (5 minutes):</h3>
                                                        <ol className="text-sm space-y-1 list-decimal ml-4">
                                                            <li>Open your Google Sheet</li>
                                                            <li>Extensions ‚Üí Apps Script</li>
                                                            <li>Copy the code from the setup guide</li>
                                                            <li>Deploy ‚Üí New deployment ‚Üí Web app</li>
                                                            <li>Copy the Web App URL and paste above</li>
                                                        </ol>
                                                        <p className="text-xs text-gray-600 mt-2">
                                                            <strong>Full guide:</strong> See APPS_SCRIPT_SETUP.md file
                                                        </p>
                                                    </div>
                                                </>
                                            ) : (
                                                <>
                                                    <div className="mb-4">
                                                        <label className="block font-medium mb-2">Google Sheets API Key</label>
                                                        <input
                                                            type="text"
                                                            className="w-full border rounded px-3 py-2"
                                                            placeholder="Enter your API key"
                                                            value={sheetsConfig.apiKey}
                                                            onChange={(e) => setSheetsConfig({...sheetsConfig, apiKey: e.target.value})}
                                                        />
                                                        <p className="text-sm text-gray-600 mt-1">
                                                            Get from <a href="https://console.cloud.google.com" target="_blank" className="text-blue-600 underline">Google Cloud Console</a>
                                                        </p>
                                                    </div>

                                                    <div className="mb-4">
                                                        <label className="block font-medium mb-2">Spreadsheet ID</label>
                                                        <input
                                                            type="text"
                                                            className="w-full border rounded px-3 py-2"
                                                            placeholder="Enter spreadsheet ID from URL"
                                                            value={sheetsConfig.spreadsheetId}
                                                            onChange={(e) => setSheetsConfig({...sheetsConfig, spreadsheetId: e.target.value})}
                                                        />
                                                        <p className="text-sm text-gray-600 mt-1">
                                                            From URL: docs.google.com/spreadsheets/d/<strong>SPREADSHEET_ID</strong>/edit
                                                        </p>
                                                    </div>

                                                    <button
                                                        onClick={testSheetsConnection}
                                                        className="w-full mb-4 bg-purple-600 text-white rounded px-4 py-2 hover:bg-purple-700 font-medium"
                                                    >
                                                        üîç Test Connection (Read Only)
                                                    </button>
                                                </>
                                            )}
                                        </>
                                    )}

                                    <div className="flex gap-3">
                                        <button
                                            onClick={saveSheetsConfig}
                                            className="flex-1 bg-green-600 text-white rounded px-4 py-2 hover:bg-green-700"
                                        >
                                            Save Configuration
                                        </button>
                                        <button
                                            onClick={() => setShowSettings(false)}
                                            className="flex-1 bg-gray-200 text-gray-700 rounded px-4 py-2 hover:bg-gray-300"
                                        >
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                            </div>
                        )}

                        {view === 'setup' && renderSetup()}
                        {view === 'teams' && renderTeamAdjustment()}
                        {view === 'game' && renderGame()}
                        {view === 'stats' && renderStats()}
                    </div>
                </div>
            );
        };

        ReactDOM.render(<GolfMoneyGameTracker />, document.getElementById('root'));
    </script>
</body>
</html>
